"use strict";(self.webpackChunkgamevault_docs=self.webpackChunkgamevault_docs||[]).push([[2199],{1517:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"advanced-usage/authentication","title":"Authentication","description":"This documentation is still being written and the features are under development. Please check back later for updates.","source":"@site/docs/advanced-usage/authentication.md","sourceDirName":"advanced-usage","slug":"/advanced-usage/authentication","permalink":"/docs/advanced-usage/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/phalcode/gamevault-docs/tree/master/docs/advanced-usage/authentication.md","tags":[],"version":"current","lastUpdatedBy":"Alper Alkan","lastUpdatedAt":1743978128000,"frontMatter":{},"sidebar":"docs","previous":{"title":"REST API Usage","permalink":"/docs/advanced-usage/rest-api"},"next":{"title":"Early Access Program","permalink":"/docs/advanced-usage/early-access-program"}}');var s=t(6070),o=t(8591);const a={},r="Authentication",c={},d=[{value:"How to Authenticate Your API Requests",id:"how-to-authenticate-your-api-requests",level:2},{value:"Generating Tokens",id:"generating-tokens",level:3},{value:"Refreshing Tokens",id:"refreshing-tokens",level:3},{value:"Revoking Tokens",id:"revoking-tokens",level:3},{value:"Setting Up OAuth2 Authentication (Single Sign-On)",id:"setting-up-oauth2-authentication-single-sign-on",level:2},{value:"Steps",id:"steps",level:3},{value:"Debugging OAuth2 Authentication",id:"debugging-oauth2-authentication",level:3},{value:"Limitations",id:"limitations",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,s.jsx)(n.admonition,{title:"WORK IN PROGRESS",type:"warning",children:(0,s.jsx)(n.p,{children:"This documentation is still being written and the features are under development. Please check back later for updates."})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-authenticate-your-api-requests",children:"How to Authenticate Your API Requests"}),"\n",(0,s.jsxs)(n.p,{children:["Most API requests require authentication using a JSON Web Token (JWT). Include this token in the ",(0,s.jsx)(n.code,{children:"Authorization"})," header of each request in the following format:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"Authorization: Bearer <your_token>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"generating-tokens",children:"Generating Tokens"}),"\n",(0,s.jsxs)(n.p,{children:["You can generate a Bearer token using one of the ",(0,s.jsx)(n.code,{children:"login"})," endpoints:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Basic Authentication:"})," If Basic Authentication is enabled, authenticate via ",(0,s.jsx)(n.code,{children:"POST /api/auth/basic/login"})," with your username and password."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OAuth2 Authentication:"})," If ",(0,s.jsx)(n.a,{href:"#setting-up-oauth2-authentication-single-sign-on",children:"OAuth2 authentication"})," is enabled, authenticate via ",(0,s.jsx)(n.code,{children:"GET /api/auth/oauth2/login"})," through your configured identity provider."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Generated access tokens are valid for ",(0,s.jsx)(n.strong,{children:"5 minutes"}),", and refresh tokens for ",(0,s.jsx)(n.strong,{children:"30 days"}),". These durations can be adjusted on the ",(0,s.jsx)(n.a,{href:"/docs/server-docs/configuration",children:"Configuration"})," page."]}),"\n",(0,s.jsx)(n.h3,{id:"refreshing-tokens",children:"Refreshing Tokens"}),"\n",(0,s.jsxs)(n.p,{children:["When your access token expires, request a new token pair using your refresh token by calling the ",(0,s.jsx)(n.code,{children:"POST /api/auth/refresh"})," endpoint with your refresh token. Your current refresh token will be invalid after this call so make sure to always use the token received from the response for future token refreshes."]}),"\n",(0,s.jsx)(n.h3,{id:"revoking-tokens",children:"Revoking Tokens"}),"\n",(0,s.jsxs)(n.p,{children:["You can revoke a token by calling the ",(0,s.jsx)(n.code,{children:"POST /api/auth/revoke"})," endpoint with your refresh token. This will effectively log out the user, by blocking future token refreshes."]}),"\n",(0,s.jsx)(n.h2,{id:"setting-up-oauth2-authentication-single-sign-on",children:"Setting Up OAuth2 Authentication (Single Sign-On)"}),"\n",(0,s.jsx)(n.p,{children:"Setting up single sign-on (SSO) using OAuth2 authentication for GameVault requires an identity provider (e.g. Google, Authelia, Keycloak, Microsoft, Discord, etc.)."}),"\n",(0,s.jsx)(n.h3,{id:"steps",children:"Steps"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Enable OAuth2 authentication in your ",(0,s.jsx)(n.a,{href:"/docs/server-docs/configuration#auth",children:"configuration"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create an OAuth2 client in your chosen identity provider."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add the Authorization URL and Token URL from your identity provider to the ",(0,s.jsx)(n.a,{href:"/docs/server-docs/configuration#auth",children:"Configuration"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Enter your client ID and client secret into the ",(0,s.jsx)(n.a,{href:"/docs/server-docs/configuration#auth",children:"Configuration"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Set the OAuth2 callback URL to your GameVault server URL appended with ",(0,s.jsx)(n.code,{children:"/api/auth/oauth2/login"})," (e.g., ",(0,s.jsx)(n.code,{children:"https://demo.gamevau.lt/api/auth/oauth2/login"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Test the authentication by accessing ",(0,s.jsx)(n.code,{children:"/api/auth/oauth2/login"})," on your GameVault server. You will be redirected to your identity provider's login page. After logging in, you'll return to GameVault, and it will exchange the provided authorization code for an access token. It will automatically register the user using the data from your identity provider if they don't already exist. A successful response looks like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "2",\n  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Authentication is now complete. Use the provided access token for authenticated requests to the GameVault API."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"debugging-oauth2-authentication",children:"Debugging OAuth2 Authentication"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Set the environment variable ",(0,s.jsx)(n.code,{children:"SERVER_LOG_LEVEL"})," environment variable to ",(0,s.jsx)(n.code,{children:"debug"})," to receive detailed logs about the authentication process."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Without plugins, only one OAuth2 Identity Provider can be used at a time."}),"\n",(0,s.jsxs)(n.li,{children:["The OAuth2 implementation is RFC-compliant but basic (requires ",(0,s.jsx)(n.code,{children:"openid"}),", ",(0,s.jsx)(n.code,{children:"profile"}),", ",(0,s.jsx)(n.code,{children:"email"}),"). Compatibility may vary depending on the identity provider. If you encounter issues using a popular identity provider, please report them on ",(0,s.jsx)(n.a,{href:"https://github.com/Phalcode/gamevault-backend/issues",children:"GitHub"}),". Include details about your identity provider and debug logs in the issue."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8591:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(758);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);